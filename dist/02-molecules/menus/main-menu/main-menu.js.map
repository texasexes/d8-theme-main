{"version":3,"sources":["02-molecules/menus/main-menu/main-menu.js"],"names":["toggleClass","length","remove","css","top","toolbarHeight","append","clearTimeout","setTimeout","window","document","click","preventDefault","next","resize","height","console","log","outerHeight","ready","jQuery","Drupal"],"mappings":"aAAC,YAAqB,CA+CpB,YAA4B,CAE1B,EAAKA,WAAL,GAF0B,CAK1B,EAASA,WAAT,GAL0B,CAQtB,EAAWC,MARW,EASxB,EAAWC,MAAX,EATwB,CAUxB,EAAa,EAVW,GAexB,EAAa,EAAE,qCAAF,CAfW,CAgBxB,EAAWC,GAAX,CAAe,CAACC,IAAKC,aAAN,CAAf,CAhBwB,CAiBxB,EAAmBC,MAAnB,GAjBwB,CAmB3B,CAlEmB,GAad,GAAqB,UAAY,CACrC,GAAM,KAAN,CACA,MAAO,gBAAkC,KAErC,EAAW,2CAF0B,EAInC,IAJmC,EAKrCC,aAAc,IAAd,CALqC,CAOvC,KAAmBC,eACpB,CACF,CAXyB,EAbN,CA2Bd,EAAiB,EAAE,mBAAF,CA3BH,CA4Bd,EAAqB,EAAE,yBAAF,CA5BP,CA6Bd,EAAW,EAAE,WAAF,CA7BG,CA8Bd,EAAc,EAAE,wBAAF,CA9BA,CA+Bd,EAAU,EAAE,cAAF,CA/BI,CAgCd,EAAc,EAAE,yBAAF,CAhCA,CAiCd,EAAO,EAAE,MAAF,CAjCO,CAkCd,EAAM,EAAEC,MAAF,CAlCQ,CAmCd,EAAM,EAAEC,QAAF,CAnCQ,CAuCd,EAAkB,YAvCJ,CAyCd,EAAW,UAzCG,CA4ChB,EAAa,EA5CG,CAqEpB,EAAeC,KAAf,CAAqB,WAAa,CAChC,EAAEC,cAAF,EADgC,CAEhC,GACD,CAHD,CArEoB,CA2EpB,EAAYD,KAAZ,CAAkB,WAAa,CAC7B,EAAEC,cAAF,EAD6B,CAE7B,EAAE,IAAF,EAAQZ,WAAR,CAvCsB,6BAuCtB,CAF6B,CAG7B,EAAE,IAAF,EAAQa,IAAR,CAAa,IAAb,EAAmBb,WAAnB,GACD,CAJD,CA3EoB,CAiFpB,EAAIc,MAAJ,CAAW,UAAY,CACnB,EAAkB,UAAU,CAE1B,GAAI,GAAO,EAAIC,MAAJ,EAAX,CACAC,QAAQC,GAAR,CAAY,WAAZ,CAH0B,CAI1B,GAAI,GAAgB,GAApB,CAEI,EAAQhB,MANc,GAOxB,EAAgB,EAAQiB,WAAR,EAPQ,CAQxBF,QAAQC,GAAR,CAAY,oBAAZ,CARwB,EAW1B,GAAI,GAAe,GAAnB,CACAD,QAAQC,GAAR,CAAY,mBAAZ,CAZ0B,CAc1B,EAAIE,KAAJ,CAAU,UAAW,CACnB,EAAShB,GAAT,CAAa,CAAC,KAAD,CAAuB,cAAvB,CAAb,CACD,CAFD,CAID,CAlBD,CAkBG,GAlBH,CAkBQ,2BAlBR,CAmBH,CApBD,CAuBD,CAxGA,EAwGCiB,MAxGD,CAwGSC,MAxGT,C","file":"main-menu.js","sourcesContent":["(function ($, Drupal) {\n\n  // WaitForFinalEvent Function\n  // This function allow us to only perform re-calculations AFTER an event has copmleted.\n  // Below, we'll use it to recalculate values only after the window has been resized, instead of recalculating every pixel change.\n  // Usage:\n  // $(window).resize(function () {\n  //   waitForFinalEvent(function(){\n  //     alert('Resize...');\n  //     //...\n  //   }, 500, \"some unique string\");\n  // });\n\n  const waitForFinalEvent = (function () {\n    const timers = {};\n    return function (callback, ms, uniqueId) {\n      if (!uniqueId) {\n        uniqueId = \"Don't call this twice without a uniqueId\";\n      }\n      if (timers[uniqueId]) {\n        clearTimeout (timers[uniqueId]);\n      }\n      timers[uniqueId] = setTimeout(callback, ms);\n    };\n  })();\n\n  // Element selectors\n  const mainMenuToggle = $('.main-menu-toggle');\n  const mainMenuToggleOpen = $('.main-menu-toggle--open');\n  const mainMenu = $('.main-nav');\n  const mainMenuSub = $('.main-menu__expand-sub');\n  const toolbar = $('.toolbar-bar');\n  const toolbarTray = $('.toolbar-tray.is-active');\n  const body = $('body');\n  const win = $(window);\n  const dom = $(document);\n\n  // Classes\n  const mainMenuSubOpen = 'main-menu__expand-sub--open';\n  const mainMenuVisible = 'js-visible';\n  const mainMenuActive = 'js-menu-active';\n  const noscroll = 'noscroll';\n\n  // New elements\n  let mainMenuBg = '';\n\n  // Show/Hide overlay\n  function mainMenuBgToggle() {\n    // Prevent the background from scrolling\n    body.toggleClass(noscroll);\n\n    // Display Main Nav\n    mainMenu.toggleClass(mainMenuVisible);\n\n    // Remove the overlay if it exists\n    if (mainMenuBg.length) {\n      mainMenuBg.remove();\n      mainMenuBg = '';\n    }\n\n    // Add overlay\n    else {\n      mainMenuBg = $('<span class=\"js-main-menu-close\" />');\n      mainMenuBg.css({top: toolbarHeight});\n      mainMenuToggleOpen.append(mainMenuBg);\n    }\n  };\n\n  // Main Menu\n  mainMenuToggle.click(function (e) {\n    e.preventDefault();\n    mainMenuBgToggle();\n  });\n\n  // Display Sub-nav\n  mainMenuSub.click(function (e) {\n    e.preventDefault();\n    $(this).toggleClass(mainMenuSubOpen);\n    $(this).next('ul').toggleClass(mainMenuVisible);\n  });\n\n  win.resize(function () {\n      waitForFinalEvent(function(){\n        // Account for admin menu\n        let winH = win.height();\n        console.log(\"winH = \" + winH);\n        let toolbarHeight = '0';\n\n        if (toolbar.length) {\n          toolbarHeight = toolbar.outerHeight();\n          console.log(\"toolbarHeight = \" + toolbarHeight);\n        }\n\n        let heightAdjust = winH - toolbarHeight;\n        console.log(\"heightAdjust = \" + heightAdjust);\n\n        dom.ready(function() {\n          mainMenu.css({'top': toolbarHeight, 'max-height': heightAdjust});\n        })\n\n      }, 500, \"Main menu - window resize\");\n  });\n\n\n}(jQuery, Drupal));\n"]}
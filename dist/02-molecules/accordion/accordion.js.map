{"version":3,"sources":["02-molecules/accordion/accordion.js"],"names":["clearTimeout","setTimeout","window","parseInt","outerWidth","Math","max","apply","map","outerHeight","get","css","top","addClass","children","first","removeClass","click","preventDefault","length","parent","toggleClass","siblings","resize","jQuery","Drupal"],"mappings":"aAAC,YAAqB,IAYd,GAAqB,UAAY,CACrC,GAAM,KAAN,CACA,MAAO,gBAAkC,KAErC,EAAW,2CAF0B,EAInC,IAJmC,EAKrCA,aAAc,IAAd,CALqC,CAOvC,KAAmBC,eACpB,CACF,CAXyB,EAZN,CAyBd,EAAoB,EAAE,wBAAF,CAzBN,CA0Bd,EAA2B,EAAE,4CAAF,CA1Bb,CA2Bd,EAA2B,EAAE,4CAAF,CA3Bb,CA4Bd,EAAgB,EAAE,kBAAF,CA5BF,CA6Bd,EAAmB,EAAE,qBAAF,CA7BL,CA8Bd,EAAmB,EAAE,qBAAF,CA9BL,CA+Bd,EAAgB,EAAE,yBAAF,CA/BF,CAkCd,EAAY,SAlCE,CAmCd,EAAc,WAnCA,CAoCd,EAAM,EAAEC,MAAF,CApCQ,CAqCd,EAAa,GArCC,CAuChB,EAAOC,SAAS,EAAIC,UAAJ,EAAT,CAA2B,EAA3B,CAvCS,CAyChB,EAAY,WAAe,CAC7B,MAAOC,MAAKC,GAAL,CAASC,KAAT,CAAe,IAAf,CAAqB,EAAMC,GAAN,CAAU,UACtC,CACI,MAAO,GAAE,IAAF,EAAQC,WAAR,EACV,CAH2B,EAGzBC,GAHyB,EAArB,CAIR,CA9CmB,CAgDhB,EAAuB,IAhDP,CAiDhB,EAAuB,IAjDP,CAkDhB,EAAe,GAlDC,CAqDhB,GArDgB,GAsDlB,EAAkBD,WAAlB,GAtDkB,CAwDlB,EAAyBA,WAAzB,CAAsCN,YAAiC,CAAvE,CAxDkB,CAyDlB,EAAyBQ,GAAzB,CAA6B,CAAEC,KAAF,CAA7B,CAzDkB,KA4DhB,GAAmB,IA5DH,CA6DhB,EAAgB,IA7DA,CA+DhB,EAAsBT,YAA6B,CAA9B,CAAoCA,YAA0B,CA/DnE,CAgEpB,EAAcQ,GAAd,CAAkB,CAAEC,KAAF,CAAlB,CAhEoB,CAmEpB,EAAcC,QAAd,GAnEoB,CAoEpB,EAAcC,QAAd,GAAyBD,QAAzB,GApEoB,CAuEpB,EAAkBE,KAAlB,GAA0BF,QAA1B,IAA8CG,WAA9C,GAvEoB,CAwEpB,EAAkBD,KAAlB,GAA0BD,QAA1B,GAAqCD,QAArC,IAAyDG,WAAzD,GAxEoB,CA0EpB,EAAiBC,KAAjB,CAAuB,WAAa,CAClC,EAAEC,cAAF,EADkC,CAG9B,EAAkBC,MAAlB,EAA4B,GAHE,EAKhC,EAAE,IAAF,EAAQC,MAAR,GAAiBP,QAAjB,IAAqCG,WAArC,GALgC,CAMhC,EAAE,IAAF,EAAQI,MAAR,GAAiBN,QAAjB,GAA4BD,QAA5B,IAAgDG,WAAhD,GANgC,GAS9B,EAAE,IAAF,EAAQI,MAAR,GAAiBC,WAAjB,IAAwCA,WAAxC,GAT8B,CAU9B,EAAE,IAAF,EAAQD,MAAR,GAAiBN,QAAjB,GAA4BO,WAA5B,IAAmDA,WAAnD,GAV8B,EAclC,EAAE,IAAF,EAAQD,MAAR,GAAiBE,QAAjB,GAA4BT,QAA5B,IAAkDG,WAAlD,GAdkC,CAelC,EAAE,IAAF,EAAQI,MAAR,GAAiBE,QAAjB,GAA4BR,QAA5B,GAAuCD,QAAvC,IAA6DG,WAA7D,GACD,CAhBD,CA1EoB,CA6FpB,EAAIO,MAAJ,CAAW,UAAY,CACrB,EAAkB,UAAU,CAC5B,EAAOpB,SAAS,EAAIC,UAAJ,EAAT,CAA2B,EAA3B,CADqB,CAI5B,EAAkBK,WAAlB,CAA8B,EAA9B,CAJ4B,CAK5B,EAAyBA,WAAzB,CAAqC,EAArC,CAL4B,CAM5B,EAAyBE,GAAzB,CAA6B,CAAEC,IAAK,EAAP,CAA7B,CAN4B,CAS5B,EAAcD,GAAd,CAAkB,CAAEC,IAAMT,YAAiC,CAAzC,CAAlB,CAT4B,CAYxB,GAZwB,GAa1B,EAAuB,IAbG,CAc1B,EAAuB,IAdG,CAe1B,EAAe,GAfW,CAiB1B,EAAkBM,WAAlB,GAjB0B,CAmB1B,EAAyBA,WAAzB,CAAsCN,YAAiC,CAAvE,CAnB0B,CAoB1B,EAAyBQ,GAAzB,CAA6B,CAAEC,KAAF,CAA7B,CApB0B,CAuB3B,CAvBD,CAuBG,GAvBH,CAuBQ,2BAvBR,CAwBD,CAzBD,CA2BD,CAxHA,EAwHCY,MAxHD,CAwHSC,MAxHT,C","file":"accordion.js","sourcesContent":["(function ($, Drupal) {\n\n  // WaitForFinalEvent Function\n  // This function allow us to only perform re-calculations AFTER an event has copmleted.\n  // Below, we'll use it to recalculate values only after the window has been resized, instead of recalculating every pixel change.\n  // Usage:\n  // $(window).resize(function () {\n  //   waitForFinalEvent(function(){\n  //     alert('Resize...');\n  //     //...\n  //   }, 500, \"some unique string\");\n  // });\n  const waitForFinalEvent = (function () {\n    const timers = {};\n    return function (callback, ms, uniqueId) {\n      if (!uniqueId) {\n        uniqueId = \"Don't call this twice without a uniqueId\";\n      }\n      if (timers[uniqueId]) {\n        clearTimeout (timers[uniqueId]);\n      }\n      timers[uniqueId] = setTimeout(callback, ms);\n    };\n  })();\n\n  const accordionTabsItem = $('.tabs .accordion__item');\n  const accordionTabsItemContent = $('.tabs .accordion__item .accordion__content');\n  const accordionTabsItemHeading = $('.tabs .accordion__item .accordion__heading');\n  const accordionItem = $('.accordion__item');\n  const accordionHeading = $('.accordion__heading');\n  const accordionContent = $('.accordion__content');\n  const accordionIcon = $('.accordion__expand-icon');\n  const activeClass = 'js-active';\n  const hiddenClass = 'js-hidden';\n  const openClass = 'js-open';\n  const closedClass = 'js-closed';\n  const win = $(window);\n  const breakpoint = 900;\n\n  let winW = parseInt(win.outerWidth(), 10);\n\n  let maxHeight = function(elems){\n    return Math.max.apply(null, elems.map(function ()\n    {\n        return $(this).outerHeight();\n    }).get());\n  }\n\n  let maxTabsHeadingHeight = maxHeight(accordionTabsItemHeading);\n  let maxTabsContentHeight = maxHeight(accordionTabsItemContent);\n  let maxTabHeight = maxTabsHeadingHeight + maxTabsContentHeight;\n\n  // Tabs are allowed to be active.\n  if (winW > breakpoint) {\n    accordionTabsItem.outerHeight(maxTabHeight);\n    // Add extra pixel to make header overlap content and override it's border.\n    accordionTabsItemHeading.outerHeight((parseInt(maxTabsHeadingHeight) + 1));\n    accordionTabsItemContent.css({ top: maxTabsHeadingHeight });\n  }\n\n  let maxHeadingHeight = maxHeight(accordionHeading);\n  let maxIconHeight = maxHeight(accordionIcon);\n\n  let accordionTopOffset = (parseInt(maxHeadingHeight) / 2) - (parseInt(maxIconHeight) / 2);\n  accordionIcon.css({ top: accordionTopOffset });\n\n  // Hide content via js so that if js is disabled, all of the content is visible\n  accordionItem.addClass(closedClass);\n  accordionItem.children().addClass(closedClass);\n\n  // Initialize tabs if needed\n  accordionTabsItem.first().addClass(openClass).removeClass(closedClass);\n  accordionTabsItem.first().children().addClass(openClass).removeClass(closedClass);\n\n  accordionHeading.click(function (e) {\n    e.preventDefault();\n\n    if (accordionTabsItem.length && winW > breakpoint) {\n      // Tabs are active. Click does not toggle, just sets to open.\n      $(this).parent().addClass(openClass).removeClass(closedClass);\n      $(this).parent().children().addClass(openClass).removeClass(closedClass);\n    } else {\n        // Toggle click element open/closed.\n        $(this).parent().toggleClass(openClass).toggleClass(closedClass);\n        $(this).parent().children().toggleClass(openClass).toggleClass(closedClass);\n    }\n\n    // Close all other elements.\n    $(this).parent().siblings().addClass(closedClass).removeClass(openClass);\n    $(this).parent().siblings().children().addClass(closedClass).removeClass(openClass);\n  });\n\n  // Update everything when the window is resized\n  win.resize(function () {\n    waitForFinalEvent(function(){\n    winW = parseInt(win.outerWidth(), 10);\n    // If desktop width set height\n    // Clear manually set css and height\n    accordionTabsItem.outerHeight('');\n    accordionTabsItemHeading.outerHeight('');\n    accordionTabsItemContent.css({ top: '' });\n\n    // Always position icon\n    accordionIcon.css({ top: (parseInt(maxTabsHeadingHeight) / 2) });\n\n    // Tabs are allowed to be active.\n    if (winW > breakpoint) {\n      maxTabsHeadingHeight = maxHeight(accordionTabsItemHeading);\n      maxTabsContentHeight = maxHeight(accordionTabsItemContent);\n      maxTabHeight = maxTabsHeadingHeight + maxTabsContentHeight;\n\n      accordionTabsItem.outerHeight(maxTabHeight);\n      // Add extra pixel to make header overlap content and override it's border.\n      accordionTabsItemHeading.outerHeight((parseInt(maxTabsHeadingHeight) + 1));\n      accordionTabsItemContent.css({ top: maxTabsHeadingHeight });\n    }\n\n    }, 100, \"Accordion - window resize\");\n  });\n\n}(jQuery, Drupal));\n"]}
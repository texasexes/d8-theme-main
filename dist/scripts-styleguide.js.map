{"version":3,"sources":["02-molecules/menus/main-menu/main-menu.js"],"names":["$","Drupal","waitForFinalEvent","timers","callback","ms","uniqueId","clearTimeout","setTimeout","mainMenuToggle","mainMenuToggleOpen","mainMenu","mainMenuSub","toolbar","toolbarTray","body","win","window","dom","document","mainMenuSubOpen","mainMenuVisible","mainMenuActive","noscroll","mainMenuBg","mainMenuBgToggle","toggleClass","length","remove","css","top","toolbarHeight","append","click","e","preventDefault","next","resize","winH","height","console","log","outerHeight","heightAdjust","ready","jQuery"],"mappings":";;AAAC,WAAUA,CAAV,EAAaC,MAAb,EAAqB;;AAEpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,MAAMC,oBAAqB,YAAY;AACrC,QAAMC,SAAS,EAAf;AACA,WAAO,UAAUC,QAAV,EAAoBC,EAApB,EAAwBC,QAAxB,EAAkC;AACvC,UAAI,CAACA,QAAL,EAAe;AACbA,mBAAW,0CAAX;AACD;AACD,UAAIH,OAAOG,QAAP,CAAJ,EAAsB;AACpBC,qBAAcJ,OAAOG,QAAP,CAAd;AACD;AACDH,aAAOG,QAAP,IAAmBE,WAAWJ,QAAX,EAAqBC,EAArB,CAAnB;AACD,KARD;AASD,GAXyB,EAA1B;;AAaA;AACA,MAAMI,iBAAiBT,EAAE,mBAAF,CAAvB;AACA,MAAMU,qBAAqBV,EAAE,yBAAF,CAA3B;AACA,MAAMW,WAAWX,EAAE,WAAF,CAAjB;AACA,MAAMY,cAAcZ,EAAE,wBAAF,CAApB;AACA,MAAMa,UAAUb,EAAE,cAAF,CAAhB;AACA,MAAMc,cAAcd,EAAE,yBAAF,CAApB;AACA,MAAMe,OAAOf,EAAE,MAAF,CAAb;AACA,MAAMgB,MAAMhB,EAAEiB,MAAF,CAAZ;AACA,MAAMC,MAAMlB,EAAEmB,QAAF,CAAZ;;AAEA;AACA,MAAMC,kBAAkB,6BAAxB;AACA,MAAMC,kBAAkB,YAAxB;AACA,MAAMC,iBAAiB,gBAAvB;AACA,MAAMC,WAAW,UAAjB;;AAEA;AACA,MAAIC,aAAa,EAAjB;;AAEA;AACA,WAASC,gBAAT,GAA4B;AAC1B;AACAV,SAAKW,WAAL,CAAiBH,QAAjB;;AAEA;AACAZ,aAASe,WAAT,CAAqBL,eAArB;;AAEA;AACA,QAAIG,WAAWG,MAAf,EAAuB;AACrBH,iBAAWI,MAAX;AACAJ,mBAAa,EAAb;AACD;;AAED;AALA,SAMK;AACHA,qBAAaxB,EAAE,qCAAF,CAAb;AACAwB,mBAAWK,GAAX,CAAe,EAACC,KAAKC,aAAN,EAAf;AACArB,2BAAmBsB,MAAnB,CAA0BR,UAA1B;AACD;AACF;;AAED;AACAf,iBAAewB,KAAf,CAAqB,UAAUC,CAAV,EAAa;AAChCA,MAAEC,cAAF;AACAV;AACD,GAHD;;AAKA;AACAb,cAAYqB,KAAZ,CAAkB,UAAUC,CAAV,EAAa;AAC7BA,MAAEC,cAAF;AACAnC,MAAE,IAAF,EAAQ0B,WAAR,CAAoBN,eAApB;AACApB,MAAE,IAAF,EAAQoC,IAAR,CAAa,IAAb,EAAmBV,WAAnB,CAA+BL,eAA/B;AACD,GAJD;;AAMAL,MAAIqB,MAAJ,CAAW,YAAY;AACnBnC,sBAAkB,YAAU;AAC1B;AACA,UAAIoC,OAAOtB,IAAIuB,MAAJ,EAAX;AACAC,cAAQC,GAAR,CAAY,YAAYH,IAAxB;AACA,UAAIP,gBAAgB,GAApB;;AAEA,UAAIlB,QAAQc,MAAZ,EAAoB;AAClBI,wBAAgBlB,QAAQ6B,WAAR,EAAhB;AACAF,gBAAQC,GAAR,CAAY,qBAAqBV,aAAjC;AACD;;AAED,UAAIY,eAAeL,OAAOP,aAA1B;AACAS,cAAQC,GAAR,CAAY,oBAAoBE,YAAhC;;AAEAzB,UAAI0B,KAAJ,CAAU,YAAW;AACnBjC,iBAASkB,GAAT,CAAa,EAAC,OAAOE,aAAR,EAAuB,cAAcY,YAArC,EAAb;AACD,OAFD;AAID,KAlBD,EAkBG,GAlBH,EAkBQ,2BAlBR;AAmBH,GApBD;AAuBD,CAxGA,EAwGCE,MAxGD,EAwGS5C,MAxGT,CAAD","file":"scripts-styleguide.js","sourcesContent":["(function ($, Drupal) {\n\n  // WaitForFinalEvent Function\n  // This function allow us to only perform re-calculations AFTER an event has copmleted.\n  // Below, we'll use it to recalculate values only after the window has been resized, instead of recalculating every pixel change.\n  // Usage:\n  // $(window).resize(function () {\n  //   waitForFinalEvent(function(){\n  //     alert('Resize...');\n  //     //...\n  //   }, 500, \"some unique string\");\n  // });\n\n  const waitForFinalEvent = (function () {\n    const timers = {};\n    return function (callback, ms, uniqueId) {\n      if (!uniqueId) {\n        uniqueId = \"Don't call this twice without a uniqueId\";\n      }\n      if (timers[uniqueId]) {\n        clearTimeout (timers[uniqueId]);\n      }\n      timers[uniqueId] = setTimeout(callback, ms);\n    };\n  })();\n\n  // Element selectors\n  const mainMenuToggle = $('.main-menu-toggle');\n  const mainMenuToggleOpen = $('.main-menu-toggle--open');\n  const mainMenu = $('.main-nav');\n  const mainMenuSub = $('.main-menu__expand-sub');\n  const toolbar = $('.toolbar-bar');\n  const toolbarTray = $('.toolbar-tray.is-active');\n  const body = $('body');\n  const win = $(window);\n  const dom = $(document);\n\n  // Classes\n  const mainMenuSubOpen = 'main-menu__expand-sub--open';\n  const mainMenuVisible = 'js-visible';\n  const mainMenuActive = 'js-menu-active';\n  const noscroll = 'noscroll';\n\n  // New elements\n  let mainMenuBg = '';\n\n  // Show/Hide overlay\n  function mainMenuBgToggle() {\n    // Prevent the background from scrolling\n    body.toggleClass(noscroll);\n\n    // Display Main Nav\n    mainMenu.toggleClass(mainMenuVisible);\n\n    // Remove the overlay if it exists\n    if (mainMenuBg.length) {\n      mainMenuBg.remove();\n      mainMenuBg = '';\n    }\n\n    // Add overlay\n    else {\n      mainMenuBg = $('<span class=\"js-main-menu-close\" />');\n      mainMenuBg.css({top: toolbarHeight});\n      mainMenuToggleOpen.append(mainMenuBg);\n    }\n  };\n\n  // Main Menu\n  mainMenuToggle.click(function (e) {\n    e.preventDefault();\n    mainMenuBgToggle();\n  });\n\n  // Display Sub-nav\n  mainMenuSub.click(function (e) {\n    e.preventDefault();\n    $(this).toggleClass(mainMenuSubOpen);\n    $(this).next('ul').toggleClass(mainMenuVisible);\n  });\n\n  win.resize(function () {\n      waitForFinalEvent(function(){\n        // Account for admin menu\n        let winH = win.height();\n        console.log(\"winH = \" + winH);\n        let toolbarHeight = '0';\n\n        if (toolbar.length) {\n          toolbarHeight = toolbar.outerHeight();\n          console.log(\"toolbarHeight = \" + toolbarHeight);\n        }\n\n        let heightAdjust = winH - toolbarHeight;\n        console.log(\"heightAdjust = \" + heightAdjust);\n\n        dom.ready(function() {\n          mainMenu.css({'top': toolbarHeight, 'max-height': heightAdjust});\n        })\n\n      }, 500, \"Main menu - window resize\");\n  });\n\n\n}(jQuery, Drupal));\n"]}
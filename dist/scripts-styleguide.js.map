{"version":3,"sources":["02-molecules/accordion/accordion.js","02-molecules/menus/main-menu/main-menu.js"],"names":["$","Drupal","waitForFinalEvent","timers","callback","ms","uniqueId","clearTimeout","setTimeout","tabsAccordion","accordionTabsItem","accordionTabsItemContent","accordionTabsItemHeading","accordionItem","accordionHeading","accordionContent","accordionIcon","activeClass","hiddenClass","openClass","closedClass","win","window","breakpoint","winW","parseInt","width","maxHeight","elems","Math","max","apply","map","outerHeight","get","maxTabsHeadingHeight","maxTabsContentHeight","maxTabHeight","css","top","maxHeadingHeight","maxIconHeight","accordionTopOffset","addClass","children","first","removeClass","click","e","preventDefault","length","parent","toggleClass","siblings","resize","jQuery","dom","document","body","mainMenuToggle","mainMenuToggleOpen","mainMenu","mainMenuSub","sideMenuSub","sideMenuSubInner","mainMenuWithSub","mainMenuExpandSub","sideMenuExpandSub","mainMenuSubIcon","sideMenuSubIcon","header","contentTopRegion","layoutContainer","winH","height","bodyPaddingTop","headerHeight","mainMenuHeight","mainMenuActiveItem","dummyElement","dummyElementMaxHeight","currentScrollTop","totalHeightToSkip","mainMenuSubOpen","sideMenuSubOpen","menuVisible","mainMenuActive","noscroll","mainMenuBg","removeMainMenuBg","remove","mainMenuBgToggle","scrollIntoView","append","next","calculateBodyPaddingTop","calculateHeaderHeight","setSideMenuSubMaxHeight","each","clone","insertAfter","closest","calculateMenuHeights","ready","c","scroll","scrollTop"],"mappings":"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","file":"scripts-styleguide.js","sourcesContent":["(function ($, Drupal) {\n\n  // WaitForFinalEvent Function\n  // This function allow us to only perform re-calculations AFTER an event has copmleted.\n  // Below, we'll use it to recalculate values only after the window has been resized, instead of recalculating every pixel change.\n  // Usage:\n  // $(window).resize(function () {\n  //   waitForFinalEvent(function(){\n  //     alert('Resize...');\n  //     //...\n  //   }, 500, \"some unique string\");\n  // });\n  const waitForFinalEvent = (function () {\n    const timers = {};\n    return function (callback, ms, uniqueId) {\n      if (!uniqueId) {\n        uniqueId = \"Don't call this twice without a uniqueId\";\n      }\n      if (timers[uniqueId]) {\n        clearTimeout (timers[uniqueId]);\n      }\n      timers[uniqueId] = setTimeout(callback, ms);\n    };\n  })();\n\n  const tabsAccordion = $('.tabs .accordion');\n  const accordionTabsItem = $('.tabs .accordion__item');\n  const accordionTabsItemContent = $('.tabs .accordion__item .accordion__content');\n  const accordionTabsItemHeading = $('.tabs .accordion__item .accordion__heading');\n  const accordionItem = $('.accordion__item');\n  const accordionHeading = $('.accordion__heading');\n  const accordionContent = $('.accordion__content');\n  const accordionIcon = $('.accordion__expand-icon');\n  const activeClass = 'js-active';\n  const hiddenClass = 'js-hidden';\n  const openClass = 'js-open';\n  const closedClass = 'js-closed';\n  const win = $(window);\n  const breakpoint = 900;\n\n  let winW = parseInt(win.width(), 10);\n\n  let maxHeight = function(elems){\n    return Math.max.apply(null, elems.map(function ()\n    {\n        return $(this).outerHeight();\n    }).get());\n  }\n\n  let maxTabsHeadingHeight = maxHeight(accordionTabsItemHeading);\n  let maxTabsContentHeight = maxHeight(accordionTabsItemContent);\n  let maxTabHeight = maxTabsHeadingHeight + maxTabsContentHeight;\n\n  // Tabs are allowed to be active.\n  if (winW > breakpoint) {\n    accordionTabsItem.outerHeight(maxTabHeight);\n    // Add extra pixel to make header overlap content and override it's border.\n    accordionTabsItemHeading.outerHeight((parseInt(maxTabsHeadingHeight) + 1));\n    accordionTabsItemContent.css({ top: maxTabsHeadingHeight });\n  }\n\n  let maxHeadingHeight = maxHeight(accordionHeading);\n  let maxIconHeight = maxHeight(accordionIcon);\n\n  let accordionTopOffset = (parseInt(maxHeadingHeight) / 2) - (parseInt(maxIconHeight) / 2);\n  accordionIcon.css({ top: accordionTopOffset });\n\n  // Hide content via js so that if js is disabled, all of the content is visible\n  accordionItem.addClass(closedClass);\n  accordionItem.children().addClass(closedClass);\n\n  // Initialize tabs if needed\n  accordionTabsItem.first().addClass(openClass).removeClass(closedClass);\n  accordionTabsItem.first().children().addClass(openClass).removeClass(closedClass);\n\n  accordionHeading.click(function (e) {\n    e.preventDefault();\n\n    if (accordionTabsItem.length && winW > breakpoint) {\n      // Tabs are active. Click does not toggle, just sets to open.\n      $(this).parent().addClass(openClass).removeClass(closedClass);\n      $(this).parent().children().addClass(openClass).removeClass(closedClass);\n    } else {\n        // Toggle click element open/closed.\n        $(this).parent().toggleClass(openClass).toggleClass(closedClass);\n        $(this).parent().children().toggleClass(openClass).toggleClass(closedClass);\n    }\n\n    // Close all other elements.\n    $(this).parent().siblings().addClass(closedClass).removeClass(openClass);\n    $(this).parent().siblings().children().addClass(closedClass).removeClass(openClass);\n  });\n\n  // Update everything when the window is resized\n  win.resize(function () {\n    waitForFinalEvent(function(){\n    winW = parseInt(win.width(), 10);\n    // If desktop width set height\n    // Clear manually set css and height\n    accordionTabsItem.outerHeight('');\n    accordionTabsItemHeading.outerHeight('');\n    accordionTabsItemContent.css({ top: '' });\n\n    // Always position icon\n    accordionIcon.css({ top: (parseInt(maxTabsHeadingHeight) / 2) });\n\n    // Tabs are allowed to be active.\n    if (winW > breakpoint) {\n      maxTabsHeadingHeight = maxHeight(accordionTabsItemHeading);\n      maxTabsContentHeight = maxHeight(accordionTabsItemContent);\n      maxTabHeight = maxTabsHeadingHeight + maxTabsContentHeight;\n\n      accordionTabsItem.outerHeight(maxTabHeight);\n      // Add extra pixel to make header overlap content and override it's border.\n      accordionTabsItemHeading.outerHeight((parseInt(maxTabsHeadingHeight) + 1));\n      accordionTabsItemContent.css({ top: maxTabsHeadingHeight });\n    }\n\n    }, 100, \"Accordion - window resize\");\n  });\n\n}(jQuery, Drupal));\n","(function ($, Drupal) {\n\n  // WaitForFinalEvent Function\n  // This function allow us to only perform re-calculations AFTER an event has copmleted.\n  // Below, we'll use it to recalculate values only after the window has been resized, instead of recalculating every pixel change.\n  // Usage:\n  // $(window).resize(function () {\n  //   waitForFinalEvent(function(){\n  //     alert('Resize...');\n  //     //...\n  //   }, 500, \"some unique string\");\n  // });\n  const waitForFinalEvent = (function () {\n    const timers = {};\n    return function (callback, ms, uniqueId) {\n      if (!uniqueId) {\n        uniqueId = \"Don't call this twice without a uniqueId\";\n      }\n      if (timers[uniqueId]) {\n        clearTimeout (timers[uniqueId]);\n      }\n      timers[uniqueId] = setTimeout(callback, ms);\n    };\n  })();\n\n  // Element selectors\n  const dom = $(document);\n  const win = $(window);\n  const body = $('body');\n  const mainMenuToggle = $('.main-menu-toggle');\n  const mainMenuToggleOpen = $('.main-menu-toggle--open');\n  const mainMenu = $('.main-nav');\n  const mainMenuSub = $('.main-menu__dropdown');\n  const sideMenuSub = $('.side-menu__dropdown');\n  const sideMenuSubInner = $('.side-menu__dropdown-inner');\n  const mainMenuWithSub = $('.main-menu__item--with-sub');\n  const mainMenuExpandSub = $('.main-menu__expand-sub');\n  const sideMenuExpandSub = $('.side-menu__expand-sub');\n  const mainMenuSubIcon = $('.main-menu__sub-icon');\n  const sideMenuSubIcon = $('.side-menu__sub-icon');\n  const header = $('.header-wrapper');\n  const contentTopRegion = $('.content-top-region');\n  const layoutContainer = $('.layout-container');\n\n  // Calculated values\n  let winH = parseInt(win.height(), 10);\n  let winW = parseInt(win.width(), 10);\n  let bodyPaddingTop = 0;\n  let headerHeight = 0;\n  let maxHeight = '100vh';\n  let mainMenuHeight = mainMenu.outerHeight();\n  let mainMenuActiveItem = $('.is-active');\n  let dummyElement = $('');\n  let dummyElementMaxHeight = '0';\n  let currentScrollTop = 0;\n  let totalHeightToSkip = 0;\n\n  // Classes\n  const mainMenuSubOpen = 'main-menu__sub-icon--open';\n  const sideMenuSubOpen = 'side-menu__sub-icon--open';\n  const menuVisible = 'js-visible';\n  const mainMenuActive = 'js-menu-active';\n  const noscroll = 'noscroll';\n\n  // New elements\n  let mainMenuBg = '';\n\n  // Expand parent items if current page is the active menu item\n  $('.main-menu__item--active-trail > .main-menu__expand-sub > .main-menu__sub-icon').addClass(mainMenuSubOpen);\n  $('.main-menu__item--active-trail > .main-menu__dropdown').addClass(menuVisible);\n\n  $('.side-menu__item--active-trail > .side-menu__expand-sub > .side-menu__sub-icon').addClass(sideMenuSubOpen);\n  $('.side-menu__item--active-trail > .side-menu__dropdown').addClass(menuVisible);\n\n  // Remove mobile nav background\n  function removeMainMenuBg() {\n    mainMenuBg.remove();\n    mainMenuBg = '';\n  }\n\n  // Show/Hide overlay\n  function mainMenuBgToggle() {\n    // Prevent the background from scrolling when the mobile menu is active\n    body.toggleClass(noscroll);\n\n    // Display main menu\n    mainMenu.toggleClass(menuVisible);\n\n    //Scroll to main menu items\n    mainMenuActiveItem = $('.is-active');\n    if (mainMenuActiveItem.length) {\n      mainMenuActiveItem.get(0).scrollIntoView();\n    }\n\n    // Remove the overlay if it exists\n    if (mainMenuBg.length) {\n      removeMainMenuBg();\n    }\n    // Add overlay if needed\n    else {\n      mainMenuBg = $('<span class=\"js-main-menu-close\" />');\n      mainMenuBg.css({top: bodyPaddingTop});\n      mainMenuToggleOpen.append(mainMenuBg);\n    }\n  };\n\n\n\n  // Main Menu\n  mainMenuToggle.click(function (e) {\n    e.preventDefault();\n    mainMenuBgToggle();\n    // expandParents();\n\n  });\n\n  // Display Sub-nav\n  mainMenuExpandSub.click(function (e) {\n    e.preventDefault();\n    $(this).children(mainMenuSubIcon).toggleClass(mainMenuSubOpen);\n    $(this).next(mainMenuSub).toggleClass(menuVisible);\n  });\n\n  // Display Sub-nav\n  sideMenuExpandSub.click(function (e) {\n    e.preventDefault();\n    $(this).children(sideMenuSubIcon).toggleClass(sideMenuSubOpen);\n    $(this).next(sideMenuSub).toggleClass(menuVisible);\n  });\n\n  // Calculate body padding top (to accommodate the admin menu)\n  function calculateBodyPaddingTop() {\n    bodyPaddingTop = parseInt(body.css('padding-top'), 10);\n  };\n\n  // Calculate header height (to accommodate the fixed header bar)\n  function calculateHeaderHeight() {\n    headerHeight = 0;\n    if (header.css('position') == 'fixed') {\n      headerHeight = parseInt(header.css('height'), 10);\n    }\n  };\n\n  function setSideMenuSubMaxHeight() {\n    $(sideMenuSubInner).each(function () {\n      dummyElement = $(this).clone();\n      dummyElement.css({'visibility': 'hidden', 'position': 'absolute', 'max-height': 'unset' }).insertAfter(this);\n      dummyElementMaxHeight = dummyElement.height();\n      dummyElement.remove();\n      $(this).closest(sideMenuSub).css({'max-height': dummyElementMaxHeight});\n    });\n  }\n\n  // Set the height and position of the main-nav and header bar\n  function calculateMenuHeights() {\n    dom.ready(function() {\n      winH = parseInt(win.height(), 10);\n      calculateBodyPaddingTop();\n      calculateHeaderHeight();\n      maxHeight = winH - bodyPaddingTop;\n      mainMenu.css({'top': bodyPaddingTop, 'max-height': maxHeight});\n      header.css({'top': bodyPaddingTop});\n      layoutContainer.css({'margin-top': headerHeight});\n      setSideMenuSubMaxHeight();\n    });\n  };\n\n  calculateMenuHeights();\n\n  // Update everything when the window is resized\n  win.resize(function () {\n    waitForFinalEvent(function(){\n      winW = parseInt(win.width(), 10);\n      // If desktop width remove all mobile menu stuff\n      if (winW > 900) {\n        // Remove background overlay\n        if (mainMenuBg.length) {\n          removeMainMenuBg();\n        }\n        // Remove noscroll class from body\n        body.removeClass(noscroll);\n        // Hide mobile menu\n        mainMenu.removeClass(menuVisible);\n      }\n      // setHeaderMarginTop();\n      calculateMenuHeights();\n    }, 100, \"Main menu - window resize\");\n  });\n\n  calculateBodyPaddingTop();\n  var c;\n\n  win.scroll(function () {\n     currentScrollTop = parseInt(win.scrollTop());\n     if (c < currentScrollTop && currentScrollTop > bodyPaddingTop + headerHeight) {\n       header.addClass(\"scrollUp\");\n     } else if (c > currentScrollTop && !(currentScrollTop <= headerHeight)) {\n       header.removeClass(\"scrollUp\");\n     }\n     c = currentScrollTop;\n   });\n\n}(jQuery, Drupal));\n"]}